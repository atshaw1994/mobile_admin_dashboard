<div class="users-index">
    <h1>Users</h1>
    
    <ul class="user-list" data-controller="user-card">
        <% @users.each do |user| %>
            <li class="user-card" data-user-url="<%= user_path(user) %>" data-user-card-target="card">
                <div class="user-avatar">
                    <% if user.respond_to?(:profile_picture) && user.profile_picture.respond_to?(:attached?) && user.profile_picture.attached? %>
                        <img src="<%= url_for(user.profile_picture) %>" alt="<%= user.username %> profile picture" class="profile-picture-small" />
                    <% else %>
                        <span class="material-symbols-rounded default-profile-picture-small">account_circle</span>
                    <% end %>
                </div>
                <div class="user-info">
                    <p class="user-name"><%= user.first_name %> <%= user.last_name %></p>
                    <p class="user-username"><%= user.username %></p>
                </div>
                <div class="user-actions">
                    <%= link_to edit_user_path(user), title: 'Edit' do %>
                        <span class="material-symbols-rounded" aria-hidden="true">edit</span>
                    <% end %>
                    <%= link_to user_path(user), method: :delete, data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: 'btn-danger', title: 'Delete' do %>
                        <span class="material-symbols-rounded" aria-hidden="true">delete</span>
                    <% end %>
                </div>
            </li>
        <% end %>
    </ul>

    <%= link_to new_user_path, class: 'btn-new-user' do %>
        <span class="material-symbols-rounded" aria-hidden="true">add</span>
    <% end %>
</div>
